# PATH environment settings
# Always include the user's local bin directory
{{- $chezmoi := default (dict) .chezmoi -}}
{{- $chezmoiData := default (dict) (index $chezmoi "data") -}}

# Detect common Android SDK installs and expose required tools on the PATH
{{- $androidSdkRoot := (index $chezmoiData "androidSdkRoot") -}}
{{- if $androidSdkRoot }}
if [ -z "${ANDROID_HOME:-}" ] || [ ! -d "${ANDROID_HOME}" ]; then
  ANDROID_HOME="{{ $androidSdkRoot }}"
  export ANDROID_HOME
fi
if [ -z "${ANDROID_SDK_ROOT:-}" ] || [ ! -d "${ANDROID_SDK_ROOT}" ]; then
  ANDROID_SDK_ROOT="{{ $androidSdkRoot }}"
  export ANDROID_SDK_ROOT
fi
{{- end }}

{{- $androidPathEntries := default (list) (index $chezmoiData "androidPathEntries") -}}
{{- if $androidPathEntries }}
for _android_bin in{{ range $index, $path := $androidPathEntries }}{{ if eq $index 0 }} "{{ $path }}"{{ else }} "{{ $path }}"{{ end }}{{ end }}; do
  if [ -d "${_android_bin}" ]; then
    case ":$PATH:" in
      *":${_android_bin}:"*) ;;
      *) PATH="${_android_bin}:$PATH" ;;
    esac
  fi
done
{{- end }}

# Prefer a Chromium-based browser discovered in PATH when CHROME_EXECUTABLE is unset
{{- $chromeExecutable := (index $chezmoiData "chromeLocation") -}}
{{- if $chromeExecutable }}
if [ -z "${CHROME_EXECUTABLE:-}" ]; then
  CHROME_EXECUTABLE="{{ $chromeExecutable }}"
  export CHROME_EXECUTABLE
fi
{{- end }}

# Append configured PATH entries
{{- $paths := default (list) (index $chezmoiData "paths") -}}
{{- range $p := (index $ "paths") }}
  if [ -d "{{ $p }}" ]; then
  PATH="${PATH}:{{ $p }}"
  fi
{{- end }}
