# Template variables
{{- $launcher := "" -}}
{{- if ne .rofiLocation "" -}}
  {{- $launcher = printf "%s -show combi -modes combi -combi-modes \"window,drun,run\"" .rofiLocation -}}
{{- else if ne .wofiLocation "" -}}
  {{- $launcher = printf "%s --show drun" .wofiLocation -}}
{{- else if ne .dmenuRunLocation "" -}}
  {{- $launcher = .dmenuRunLocation -}}
{{- end -}}

{{- $lockcmd := "" -}}
{{- if ne .swaylockLocation "" -}}
  {{- $lockcmd = .swaylockLocation -}}
{{- else if ne .xscreensaverCommandLocation "" -}}
  {{- $lockcmd = printf "%s -lock" .xscreensaverCommandLocation -}}
{{- else if ne .xscreensaverLocation "" -}}
  {{- $lockcmd = .xscreensaverLocation -}}
{{- end -}}

{{- $clipse := .clipse -}}

{{- $terminal := "" -}}
{{- if ne .terminatorLocation "" -}}
  {{- $terminal = .terminatorLocation -}}
{{- else if ne .weztermLocation "" -}}
  {{- $terminal = .weztermLocation -}}
{{- else if ne .konsoleLocation "" -}}
  {{- $terminal = .konsoleLocation -}}
{{- else if ne .alacrittyLocation "" -}}
  {{- $terminal = .alacrittyLocation -}}
{{- else if ne .urxvtLocation "" -}}
  {{- $terminal = .urxvtLocation -}}
{{- else if ne .xtermLocation "" -}}
  {{- $terminal = .xtermLocation -}}
{{- end -}}

{{- $popupTerm := "" -}}
{{- if ne .alacrittyLocation "" -}}
  {{- $popupTerm = .alacrittyLocation -}}
{{- else if ne .urxvtLocation "" -}}
  {{- $popupTerm = .urxvtLocation -}}
{{- else if ne .xtermLocation "" -}}
  {{- $popupTerm = .xtermLocation -}}
{{- end -}}
{{- $anytype := .anytypeLocation -}}

# ------------------------
# Monitors (customize names + positions)
# ------------------------
# monitor=<name>,<res>@<refresh>,<pos_x>x<pos_y>,<scale>
monitor=HDMI-A-1,3840x2160@60,0x0,1

# ------------------------
# General Settings
# ------------------------
general {
    gaps_in = 10                          # inner gaps
    gaps_out = 15                         # outer gaps
    border_size = 2                       # window border width
    col.active_border = rgba(135affcc)    # active window border color
    col.inactive_border = rgba(323232cc)  # inactive window border
    layout = dwindle                      # bsp-like tiling
}

env = LIBVA_DRIVER_NAME,nvidia
env = XDG_SESSION_TYPE,wayland
env = GBM_BACKEND,nvidia-drm
env = __GLX_VENDOR_LIBRARY_NAME,nvidia

cursor {
    no_hardware_cursors = true
}

# ------------------------
# Decoration & Animation
# ------------------------
decoration {
    rounding = 8
    #blur = yes
    #blur_size = 12
    #drop_shadow = yes
    #shadow_range = 18
    #shadow_render_power = 4
}

animations {
    enabled = yes
    animation = windows, 1, 4, default
    animation = fade, 1, 3, default
    animation = specialWorkspace, 1, 4, default, slidefade, top
}

# ------------------------
# Input & Gestures
# ------------------------
input {
    kb_layout = us
    repeat_delay = 250
    repeat_rate = 30
}
gestures {
    workspace_swipe = on
}

# ------------------------
# Keybindings
# ------------------------
# Terminal launch: Ctrl+Meta+T
bind = CTRL SUPERL, T, exec, {{$terminal}}
#bind = CTRL SUPERR, T, exec, {{$terminal}}
# Terminal as alternate: Meta+Return
bind = SUPERL, RETURN, exec, {{$terminal}}
#bind = SUPERR, RETURN, exec, {{$terminal}}
bind = SUPERL, SPACE, exec, {{$launcher}}
#bind = SUPERR, SPACE, exec, {{$launcher}}
# Clipboard history: Meta+V
bind = SUPERL, V, exec, [float; focuswindow] {{$popupTerm}} -e {{$clipse}}
#bind = SUPERR, V, exec, [float; focuswindow] {{$popupTerm}} {{$clipse}}
# Windows
bind = SUPERL SHIFT, Q, killactive
bind = SUPERL SHIFT, W, closewindow
bind = SUPERL, F, fullscreen
#bind = SUPERR, F, fullscreen
bind = SUPERL, 0, workspace, empty
#bind = SUPERR, 0, workspace, empty
bind = SUPERL, 1, workspace, 1
#bind = SUPERR, 1, workspace, 1
bind = SUPERL, 2, workspace, 2
#bind = SUPERR, 2, workspace, 2
bind = SUPERL, 3, workspace, 3
#bind = SUPERR, 3, workspace, 3
bind = SUPERL, 4, workspace, 4
#bind = SUPERR, 4, workspace, 4
bind = SUPERL, 5, workspace, 5
#bind = SUPERR, 5, workspace, 5
bind = SUPERL, 5, workspace, 5
#bind = SUPERR, 5, workspace, 5
bind = SUPERL, 6, workspace, 6
#bind = SUPERR, 6, workspace, 6
bind = SUPERL, 7, workspace, 7
#bind = SUPERR, 7, workspace, 7
bind = SUPERL, 8, workspace, 8
#bind = SUPERR, 8, workspace, 8
bind = SUPERL, 9, workspace, 9
#bind = SUPERR, 9, workspace, 9
bind = SUPERL, m, togglespecialworkspace, music
#bind = SUPERR, m, togglespecialworkspace, music
bind = SUPERL, grave, togglespecialworkspace, terminal
#bind = SUPERR, grave, togglespecialworkspace, terminal
bind = SUPERL, T, togglespecialworkspace, terminal
#bind = SUPERR, T, togglespecialworkspace, terminal
bind = SUPERL, P, togglespecialworkspace, anytype
#bind = SUPERR, P, togglespecialworkspace, anytype
bind = SUPERL CTRL, LEFT, workspace, -1
#bind = SUPERR CTRL, LEFT, workspace, -1
bind = SUPERL CTRL, RIGHT, workspace, +1
#bind = SUPERR CTRL, RIGHT, workspace, +1
bind = SUPERL SHIFT CTRL, LEFT, movetoworkspace, -1
#bind = SUPERR SHIFT CTRL, LEFT, movetoworkspace, -1
bind = SUPERL SHIFT CTRL, RIGHT, movetoworkspace, +1
#bind = SUPERR SHIFT CTRL, RIGHT, movetoworkspace, +1
bind = SUPERL SHIFT, 0, movetoworkspace, empty
#bind = SUPERR SHIFT, 0, movetoworkspace, empty
bind = SUPERL SHIFT, 1, movetoworkspace, 1
#bind = SUPERR SHIFT, 1, movetoworkspace, 1
bind = SUPERL SHIFT, 2, movetoworkspace, 2
#bind = SUPERR SHIFT, 2, movetoworkspace, 2
bind = SUPERL SHIFT, 3, movetoworkspace, 3
#bind = SUPERR SHIFT, 3, movetoworkspace, 3
bind = SUPERL SHIFT, 4, movetoworkspace, 4
#bind = SUPERR SHIFT, 4, movetoworkspace, 4
bind = SUPERL SHIFT, 5, movetoworkspace, 5
#bind = SUPERR SHIFT, 5, movetoworkspace, 5
bind = SUPERL SHIFT, 6, movetoworkspace, 6
#bind = SUPERR SHIFT, 6, movetoworkspace, 6
bind = SUPERL SHIFT, 7, movetoworkspace, 7
#bind = SUPERR SHIFT, 7, movetoworkspace, 7
bind = SUPERL SHIFT, 8, movetoworkspace, 8
#bind = SUPERR SHIFT, 8, movetoworkspace, 8
bind = SUPERL SHIFT, 9, movetoworkspace, 9
#bind = SUPERR SHIFT, 9, movetoworkspace, 9
bind = ALT,Tab,cyclenext,
bind = SUPERL SHIFT, Tab, cyclenext, prev
bind = ALT,Tab,bringactivetotop,

# Screen shots
#ActiveWindowScreenShot=Meta+Print
#CurrentMonitorScreenShot=
#FullScreenScreenShot=Shift+Print
#OpenWithoutScreenshot=
#RecordRegion=Meta+Shift+R
#RecordScreen=Meta+Alt+R
#RecordWindow=Meta+Ctrl+R
#RectangularRegionScreenShot=Meta+Shift+Print
#WindowUnderCursorScreenShot=Meta+Ctrl+Print

#bind = META, PRINT, exec, spectacle -a -c
{{- if and (ne .grimLocation "") (ne .slurpLocation "") (ne .wlCopyLocation "") (ne .hyprpickerLocation "") -}}
  {{- if ne .hyprshotLocation "" -}}
bind = SUPERL, PRINT, exec, hyprshot -m window
bind = SHIFT, PRINT, exec, hyprshot -m screen
bind = SUPERL SHIFT, PRINT, exec, hyprshot -m region
bind = SUPERL CTRL, PRINT, exec, hyprshot -m window
  {{- else -}}
bind = SUPERL, PRINT, exec, grim -g "$(slurp -w)" - | wl-copy
bind = SHIFT, PRINT, exec, grim - | wl-copy
bind = SUPERL SHIFT, PRINT, exec, grim -g "$(slurp)" - | wl-copy
bind = SUPERL CTRL, PRINT, exec, grim -g "$(slurp -w)" - | wl-copy
  {{- end -}}
{{- end -}}

# Lock
#bind = SUPERL, L, exec, swaylock
bind = SUPERL, L, exec, {{$lockcmd}}
#bind = SUPERR, L, exec, {{$lockcmd}}
# Media keys
binde=, XF86AudioRaiseVolume, exec, wpctl set-volume -l 1.5 @DEFAULT_AUDIO_SINK@ 1%+
bindl=, XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 1%-
bindl=, XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
# Requires playerctl
bindl=, XF86AudioPlay, exec, playerctl play-pause
bindl=, XF86AudioPrev, exec, playerctl previous
bindl=, XF86AudioNext, exec, playerctl next
## Mouse bindings
bindm=ALT,mouse:272,movewindow
bindm=ALT,mouse:273,resizewindow

# ------------------------
# Window Rules (float dialogs)
# ------------------------
#windowrule = float, ^(pavucontrol|blueman-manager)$
#windowrule = float, kitty

# ------------------------
# Workspace rules
# ------------------------
workspace = special:music, persistent:true
workspace = special:terminal, persistent:true
workspace = special:anytype, persistent:true
workspace = 1, persistent:true
workspace = 2, persistent:true
workspace = 3, persistent:true
workspace = 4, persistent:true
workspace = 5, persistent:true
workspace = 5, persistent:true
workspace = 6, persistent:true
workspace = 7, persistent:true
workspace = 8, persistent:true
workspace = 9, persistent:true

# ------------------------
# Autostart
# ------------------------
exec-once = mako
exec-once = waybar
exec-once = swaybg -m fill /usr/share/backgrounds/your-wallpaper.jpg
exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP=hyprland
exec-once = {{$clipse}} -listen
exec-once = solaar -w hide
exec-once = kded5
exec-once = kdeconnect-indicator
exec-once = [workspace special:music silent] flatpak run com.spotify.Client
windowrulev2 = workspace special:music, class:^(Spotify|spotify|org.spotify.Client)$
exec-once = [workspace special:terminal silent] {{$terminal}}
{{- if ne $anytype "" -}}
exec-once = [workspace special:anytype silent] {{$anytype}}
{{- end -}}
windowrulev2 = workspace special:anytype, class:^(Anytype)$
