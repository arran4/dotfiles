gtk-enable-animations=1
gtk-cursor-theme-size=24
# Configs for GTK2 programs
style "user-font"
{
    font_name="Noto Sans Regular"
}
#widget_class "*" style "user-font"
#gtk-font-name="Noto Sans,  10"

{{- $theme := get . "gtkTheme" }}
{{- if not $theme }}
  {{- if env "GTK_THEME" }}
    {{- $theme = env "GTK_THEME" | splitList ":" | first }}
  {{- else if (eq .chezmoi.os "linux") }}
    {{- if lookPath "gsettings" }}
      {{- $gsettingsTheme := output "sh" "-c" "gsettings list-schemas | grep -q org.gnome.desktop.interface && gsettings get org.gnome.desktop.interface gtk-theme 2>/dev/null || true" | trim | trimAll "'" | trimAll "\"" }}
      {{- if $gsettingsTheme }}
        {{- $theme = $gsettingsTheme }}
      {{- end }}
    {{- else if lookPath "xfconf-query" }}
      {{- $xfceTheme := output "sh" "-c" "xfconf-query -c xsettings -p /Net/ThemeName 2>/dev/null || true" | trim }}
      {{- if $xfceTheme }}
        {{- $theme = $xfceTheme }}
      {{- end }}
    {{- end }}
  {{- end }}
{{- end }}
{{- if not $theme }}{{- $theme = "Breeze" }}{{- end }}

{{- $themePath := "" }}
{{- $searchPaths := list (joinPath .chezmoi.homeDir ".themes") (joinPath .chezmoi.homeDir ".local/share/themes") "/usr/share/themes" "/usr/local/share/themes" }}

{{- range $path := $searchPaths }}
  {{- $candidate := joinPath $path $theme "gtk-2.0/gtkrc" }}
  {{- if stat $candidate }}
    {{- $themePath = $candidate }}
    {{- break }}
  {{- end }}
{{- end }}

{{- if not $themePath }}
  {{- range $fallback := list "Breeze" "Adwaita" "Raleigh" "Greybird" }}
    {{- if ne $theme $fallback }}
       {{- range $path := $searchPaths }}
         {{- $candidate := joinPath $path $fallback "gtk-2.0/gtkrc" }}
         {{- if stat $candidate }}
           {{- $theme = $fallback }}
           {{- $themePath = $candidate }}
           {{- break }}
         {{- end }}
       {{- end }}
    {{- end }}
    {{- if $themePath }}{{- break }}{{- end }}
  {{- end }}
{{- end }}

{{- if $themePath }}
include "{{ $themePath }}"
gtk-theme-name="{{ $theme }}"
{{- else }}
# Theme "{{ $theme }}" not found in standard paths.
#gtk-theme-name="{{ $theme }}"
{{- end }}

#gtk-icon-theme-name="breeze"
#gtk-fallback-icon-theme="HighContrast"
#gtk-cursor-theme-name="breeze_cursors"
#gtk-toolbar-style=3
#gtk-menu-images=1
#gtk-button-images=1
#gtk-primary-button-warps-slider=0

{{- if stat (joinPath .chezmoi.homeDir ".gtkrc-2.0.mine") }}
include "{{ .chezmoi.homeDir }}/.gtkrc-2.0.mine"
{{- end }}
